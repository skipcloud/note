#compdef note

local context state state_descr line
typeset -A opt_args
local -a files=($(find NOTE_DIR -path NOTE_DIR/.git -prune -o -type f -printf '%P '))

_arguments '--help[display command usage]' \
           '-h[display command usage]' \
           '--search[search for a note]' \
           '-s[search for a note]' \
           '--text-search[search for text in your notes]' \
           '-t[search for text in your notes]' \
           '--delete[delete a note]' \
           '-d[delete a note]' \
           '1:name:->name'
  
case $state in
  name )
    if [ ${#words[@]} -gt 2 ]; then
      case $words[2] in
        --search | -s | --delete | -d)
        compadd "$@" $files
        ;;
      esac
    else
      compadd "$@" $files
    fi
    ;;
esac

